image:
  - "Visual Studio 2019"

branches:
  only:
    - master
    - develop
    - /^v\d.*$/
    - /^deploy-test(-.*)?$/

configuration:
  - Release

environment:
  PYTHON: "C:\\Python37"

install:
  - git submodule update --init --recursive
  - set PATH=%PYTHON%;%PYTHON%\\Scripts;%PATH%
  - where python
  - python --version

build_script:
  - call "C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat" x64
  - C:\msys64\usr\bin\bash -lc "cd \"%APPVEYOR_BUILD_FOLDER%\" && scripts/appveyor-win.sh"

artifacts:
  - path: Chiaki
    name: Chiaki
  - path: Chiaki-PDB
    name: Chiaki-PDB
